<?xml version="1.0" encoding="UTF-8"?>
<mapper namespace="UserMapper">
    <!-- 根据 ID 查询用户 -->
    <select id="GetUserById" resultType="User">
        SELECT id, username, email, create_at 
        FROM users 
        WHERE id = #{id}
    </select>

    <!-- 根据用户名模糊查询用户 -->
    <select id="GetUsersByName" resultType="User">
        SELECT id, username, email, create_at 
        FROM users 
        WHERE username LIKE #{name}
        ORDER BY create_at DESC
    </select>

    <!-- 查询所有用户 -->
    <select id="GetAllUsers" resultType="User">
        SELECT id, username, email, create_at 
        FROM users 
        ORDER BY create_at DESC
    </select>

    <!-- 统计用户数量 -->
    <select id="CountUsers" resultType="int64">
        SELECT COUNT(*) 
        FROM users
    </select>

    <!-- 插入用户 -->
    <insert id="InsertUser">
        INSERT INTO users (username, email, create_at) 
        VALUES (#{username}, #{email}, #{create_at})
    </insert>

    <!-- 更新用户 -->
    <update id="UpdateUser">
        UPDATE users 
        SET username = #{username}, 
            email = #{email}
        WHERE id = #{id}
    </update>

    <!-- 删除用户 -->
    <delete id="DeleteUser">
        DELETE FROM users 
        WHERE id = #{id}
    </delete>
</mapper>